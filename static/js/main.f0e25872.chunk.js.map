{"version":3,"sources":["theme/theme.js","layout/EditorElements.js","layout/EditoriaLayout.js","layout/EditoriaMobileLayout.js","config/config.js","config/configMobile.js","App.js","text.js","serviceWorker.js","index.js"],"names":["cokoTheme","colorBackground","colorPrimary","colorSecondary","colorFurniture","colorBorder","colorBackgroundHue","colorBackgroundTabs","colorSuccess","colorError","colorText","colorTextReverse","colorTextPlaceholder","colorWarning","colorBackgroundToolBar","colorSelection","colorBackgroundButton","fontInterface","fontHeading","fontReading","fontWriting","fontTools","fontSizeBase","fontSizeBaseSmall","fontSizeHeading1","fontSizeHeading2","fontSizeHeading3","fontSizeHeading4","fontSizeHeading5","fontSizeHeading6","lineHeightBase","lineHeightBaseSmall","lineHeightHeading1","lineHeightHeading2","lineHeightHeading3","lineHeightHeading4","lineHeightHeading5","lineHeightHeading6","gridUnit","borderRadius","borderWidth","borderStyle","boxShadow","transitionDuration","transitionTimingFunction","transitionDelay","breakpoints","cssOverrides","Wax","MenuButton","css","th","lighten","divider","grid","Wrapper","styled","div","Main","TopMenu","SideMenu","EditorArea","WaxSurfaceScroll","EditorElements","EditorContainer","CommentsContainer","CommentsContainerNotes","NotesAreaContainer","NotesContainer","surfaceHeight","notesHeight","onResizeEnd","arr","size","LeftSideBar","ComponentPlugin","MainMenuToolBar","NotesArea","RightArea","WaxOverlays","EditoriaLayout","editor","main","useContext","WaxContext","view","notes","DocumentHelpers","findChildrenByType","state","doc","schema","nodes","footnote","getNotes","areNotes","length","useState","hasNotes","setHasNotes","delayedShowedNotes","useCallback","setTimeout","useEffect","theme","direction","panelWidths","resize","area","id","TopBar","MenuService","templateArea","toolGroups","name","more","SchemaService","DefaultSchema","RulesService","emDash","ellipsis","ShortCutsService","EnableTrackChangeService","enabled","PmPlugins","columnResizing","tableEditing","invisibles","hardBreak","WaxSelectionPlugin","services","DisplayBlockLevelService","DisplayToolGroupService","TextBlockLevelService","TextToolGroupService","ListsService","LinkService","InlineAnnotationsService","TrackChangeService","CommentsService","PlaceholderService","ImageService","TablesService","BaseService","BaseToolGroupService","NoteService","TableToolGroupService","ImageToolGroupService","AnnotationToolGroupService","NoteToolGroupService","ListToolGroupService","CodeBlockService","CodeBlockToolGroupService","TrackChangeToolGroupService","DisplayTextToolGroupService","MathService","FindAndReplaceService","TrackingAndEditingToolGroupService","FullScreenService","FullScreenToolGroupService","SpecialCharactersService","SpecialCharactersToolGroupService","HighlightService","TextHighlightToolGroupServices","BlockDropDownToolGroupService","GlobalStyle","createGlobalStyle","user","userId","username","App","window","innerWidth","innerHeight","setSize","useLayoutEffect","updateSize","addEventListener","removeEventListener","useWindowSize","width","layout","finalConfig","config","key","EditoriaMobileLayout","configMobile","EditoriaComponent","useMemo","autoFocus","placeholder","fileUpload","file","reader","FileReader","Promise","accept","fail","onload","result","onerror","error","readAsDataURL","renderImage","value","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.f0e25872.chunk.js","sourcesContent":["/* eslint-disable import/extensions */\nimport 'typeface-fira-sans-condensed';\nimport 'fontsource-merriweather';\nimport 'typeface-vollkorn';\nimport 'typeface-inter';\n\nimport { css } from 'styled-components';\n\nconst cokoTheme = {\n  /* Colors */\n  colorBackground: 'white',\n  colorPrimary: '#525E76',\n  colorSecondary: '#E7E7E7',\n  colorFurniture: '#CCC',\n  colorBorder: '#EBEBF0',\n  colorBackgroundHue: '#F1F5FF',\n  colorBackgroundTabs: '#e1ebff',\n  colorSuccess: '#008800',\n  colorError: 'indianred',\n  colorText: '#111',\n  colorTextReverse: '#FFF',\n  colorTextPlaceholder: '#595959',\n  colorWarning: '#ffc107',\n  colorBackgroundToolBar: '#fff',\n  colorSelection: '#C5D7FE',\n  colorBackgroundButton: '#0042C7',\n  /* Text variables */\n\n  // fonts\n  fontInterface: 'Fira Sans Condensed',\n  fontHeading: 'Fira Sans Condensed',\n  fontReading: 'Vollkorn',\n  fontWriting: 'Merriweather',\n  fontTools: 'Inter',\n\n  // font sizes\n  fontSizeBase: '14px',\n  fontSizeBaseSmall: '12px',\n  fontSizeHeading1: '40px',\n  fontSizeHeading2: '36px',\n  fontSizeHeading3: '28px',\n  fontSizeHeading4: '24px',\n  fontSizeHeading5: '20px',\n  fontSizeHeading6: '16px',\n\n  // line heights\n  lineHeightBase: '24px',\n  lineHeightBaseSmall: '16px',\n  lineHeightHeading1: '48px',\n  lineHeightHeading2: '40px',\n  lineHeightHeading3: '32px',\n  lineHeightHeading4: '32px',\n  lineHeightHeading5: '24px',\n  lineHeightHeading6: '24px',\n\n  /* Spacing */\n  gridUnit: '4px',\n\n  /* Border */\n  borderRadius: '0',\n  borderWidth: '1px',\n  borderStyle: 'solid',\n\n  /* Shadow (for tooltip) */\n  boxShadow: '0 2px 4px 0 rgba(51, 51, 51, 0.3)',\n\n  /* Transition */\n  transitionDuration: '0.2s',\n  transitionTimingFunction: 'ease',\n  transitionDelay: '0',\n  /* Breakpoints */\n  breakpoints: [480, 768, 1000, 1272],\n\n  cssOverrides: {\n    Wax: {\n      MenuButton: css`\n        /* color: magenta;\n\n        > svg {\n          fill: indianred;\n        } */\n      `,\n    },\n  },\n};\n\nexport default cokoTheme;\n","import { css } from 'styled-components';\n\nimport { lighten, th } from '@pubsweet/ui-toolkit';\n\n/* All styles regarding ProseMirror surface and elements */\n\nconst fontWriting = css`\n  font-family: ${th('fontWriting')};\n  font-size: ${th('fontSizeBase')};\n  color: ${th('colorText')};\n`;\n\nexport default css`\n  .ProseMirror {\n    background: white;\n    counter-reset: footnote;\n    line-height: 1.6;\n    ${fontWriting}\n\n    p::selection,\n    h1::selection,\n    h2::selection,\n    h3::selection,\n    code::selection,\n    span::selection,\n    p span::selection,\n    h1 span::selection,\n    h2 span::selection,\n    h3 span::selection,\n    code span::selection {\n      background-color: transparent;\n    }\n\n    &:focus {\n      outline: none;\n    }\n  }\n\n  .ProseMirror .wax-selection-marker {\n    background-color: ${th('colorSelection')};\n  }\n\n  div[contenteditable='false'] {\n    user-select: none;\n    pointer-events: none;\n  }\n\n  .ProseMirror footnote {\n    font-variant-numeric: lining-nums proportional-nums;\n    display: inline-block;\n    text-align: center;\n    width: 17px;\n    height: 17px;\n    background: white;\n    border-bottom: 2px solid black;\n    color: black;\n    cursor: pointer;\n  }\n\n  .ProseMirror footnote::after {\n    content: counter(footnote);\n    position: relative;\n    bottom: 2px;\n    font-size: 16px;\n    counter-increment: footnote;\n  }\n\n  hr {\n    padding: 2px 10px;\n    border: none;\n    margin: 1em 0;\n  }\n\n  hr:after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: silver;\n    line-height: 2px;\n  }\n\n  ul,\n  ol {\n    padding-left: 30px;\n  }\n\n  blockquote {\n    padding-left: 1em;\n    border-left: 3px solid #eee;\n    margin-left: 0;\n    margin-right: 0;\n  }\n\n  img {\n    cursor: default;\n    width: 100%;\n  }\n\n  sup,\n  sub {\n    line-height: 0;\n  }\n\n  /* Tables */\n\n  table {\n    border-collapse: initial;\n    border-spacing: 0;\n    border-width: 0 thin thin 0;\n    border: 1px solid #eee;\n    table-layout: fixed;\n    width: 100%;\n    margin: 0;\n    overflow: hidden;\n    page-break-inside: avoid;\n  }\n\n  th,\n  td {\n    border: 1px solid #eee;\n    /*width: 200px;*/\n    padding: 2px 5px;\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .tableWrapper {\n    overflow-x: auto;\n  }\n\n  .column-resize-handle {\n    position: absolute;\n    right: -2px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    z-index: 20;\n    background-color: #adf;\n    pointer-events: none;\n  }\n\n  .ProseMirror.resize-cursor {\n    cursor: ew-resize;\n    cursor: col-resize;\n  }\n  /* Give selected cells a blue overlay */\n  .selectedCell:after {\n    z-index: 2;\n    position: absolute;\n    content: '';\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n\n  /* placeholder */\n  .empty-node::before {\n    color: #aaa;\n    float: left;\n    font-style: italic;\n    pointer-events: none;\n    height: 0;\n  }\n\n  p.empty-node:first-child::before {\n    content: attr(data-content);\n  }\n\n  /* invisible characters */\n  .invisible {\n    pointer-events: none;\n    user-select: none;\n  }\n\n  .invisible:before {\n    caret-color: inherit;\n    color: gray;\n    display: inline-block;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1em;\n    width: 0;\n  }\n\n  .invisible--space:before {\n    content: '·';\n  }\n\n  .invisible--break:before {\n    content: '¬';\n  }\n\n  .invisible--par:after {\n    content: '¶';\n  }\n\n  span.deletion {\n    text-decoration: line-through;\n    color: ${th('colorError')};\n    footnote {\n      background: ${th('colorError')};\n    }\n  }\n\n  span.insertion {\n    color: royalblue;\n    footnote {\n      background: royalblue;\n    }\n  }\n\n  .selected-insertion {\n    background: ${lighten('royalblue', 0.65)};\n  }\n\n  .selected-deletion {\n    background: ${lighten('indianred', 0.65)};\n  }\n\n  .selected-format-change,\n  .selected-block-change {\n    background-color: #eefbfb;\n  }\n\n  .format-change {\n    border-bottom: 2px solid royalblue;\n  }\n\n  [data-track] {\n    position: relative;\n  }\n\n  [data-track]::before {\n    content: '';\n    position: absolute;\n    border-left: 2px solid blue;\n    left: -10px;\n    height: 100%;\n  }\n\n  li[data-track]::before,\n  li [data-track]::before {\n    left: -5px;\n  }\n\n  span.comment {\n    border-bottom: 2px solid gold;\n    border-radius: 3px 3px 0 0;\n\n    .active-comment {\n      background-color: gold;\n      /* color: black; */\n    }\n  }\n\n  span.search-result {\n    background: #bee594;\n  }\n\n  /* == Math Nodes ======================================== */\n\n  .math-node {\n    min-width: 1em;\n    min-height: 1em;\n    font-size: 0.95em;\n    font-family: 'Consolas', 'Ubuntu Mono', monospace;\n    cursor: auto;\n    .ProseMirror {\n      box-shadow: none;\n      min-height: 100%;\n      padding: 0;\n      background: #eee;\n      color: rgb(132, 33, 162);\n    }\n  }\n\n  .math-node.empty-math .math-render::before {\n    content: '(empty)';\n    color: red;\n  }\n\n  .math-node .math-render.parse-error::before {\n    content: '(math error)';\n    color: red;\n    cursor: help;\n  }\n\n  .math-node.ProseMirror-selectednode {\n    outline: none;\n  }\n\n  .math-node .math-src {\n    display: none;\n    color: rgb(132, 33, 162);\n    tab-size: 4;\n  }\n\n  .math-node.ProseMirror-selectednode .math-src {\n    display: flex;\n  }\n  .math-node.ProseMirror-selectednode .math-render {\n    display: none;\n  }\n\n  /* -- Inline Math --------------------------------------- */\n\n  math-inline {\n    display: inline;\n    white-space: nowrap;\n  }\n\n  math-inline .math-render {\n    display: inline-block;\n    font-size: 0.85em;\n    cursor: pointer;\n  }\n\n  math-inline .math-src .ProseMirror {\n    display: inline;\n  }\n\n  math-inline .math-src::after,\n  math-inline .math-src::before {\n    content: '$';\n    color: #b0b0b0;\n  }\n\n  /* -- Block Math ---------------------------------------- */\n\n  math-display {\n    display: block;\n  }\n\n  math-display .math-render {\n    display: block;\n  }\n\n  math-display.ProseMirror-selectednode {\n    background-color: #eee;\n  }\n\n  math-display .math-src .ProseMirror {\n    width: 100%;\n    display: block;\n  }\n\n  math-display .math-src::after,\n  math-display .math-src::before {\n    content: '$$';\n    text-align: left;\n    color: #b0b0b0;\n  }\n\n  math-display .katex-display {\n    margin: 0;\n  }\n\n  /* -- Selection Plugin ---------------------------------- */\n\n  p::selection,\n  p > *::selection {\n    background-color: #c0c0c0;\n  }\n  .katex-html *::selection {\n    background-color: none !important;\n  }\n\n  .math-node.math-select .math-render {\n    background-color: #c0c0c0ff;\n  }\n  math-inline.math-select .math-render {\n    padding-top: 2px;\n  }\n`;\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\nimport styled, { css, ThemeProvider } from \"styled-components\";\nimport PanelGroup from \"react-panelgroup\";\nimport { DocumentHelpers } from \"wax-prosemirror-utilities\";\nimport { WaxContext, ComponentPlugin } from \"wax-prosemirror-core\";\nimport { grid, th } from \"@pubsweet/ui-toolkit\";\nimport { cokoTheme } from \"../theme\";\nimport EditorElements from \"./EditorElements\";\n\n/* Katex css */\nimport \"~../../katex/dist/katex.min.css\";\n\nconst divider = css`\n  .panelGroup {\n    background: #fff;\n  }\n  .divider {\n    > div {\n      background: ${th(\"colorBorder\")};\n      height: ${grid(1)};\n      max-height: ${grid(1)};\n\n      &:hover {\n        height: ${grid(2)};\n        max-height: ${grid(2)};\n      }\n    }\n  }\n`;\n\nconst Wrapper = styled.div`\n  background: ${th(\"colorBackground\")};\n  font-family: ${th(\"fontInterface\")};\n  font-size: ${th(\"fontSizeBase\")};\n\n  display: flex;\n  flex-direction: column;\n\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n\n  ${divider}\n`;\n\nconst Main = styled.div`\n  display: flex;\n  flex-grow: 1;\n`;\n\nconst TopMenu = styled.div`\n  display: flex;\n  min-height: 40px;\n  user-select: none;\n  background: ${th(\"colorBackgroundToolBar\")}\n  border-bottom: ${th(\"borderWidth\")} ${th(\"borderStyle\")} ${th(\"colorBorder\")};\n\n  > div:not(:last-child) {\n    border-right: ${th(\"borderWidth\")} ${th(\"borderStyle\")}\n      ${th(\"colorFurniture\")};\n  }\n\n\n  > div:nth-last-of-type(-n+2) {\n    margin-left: auto;\n  }\n\n  > div:last-child {\n    margin-left: 0;\n    margin-right: ${grid(5)};\n  }\n\n  > div[data-name=\"Tables\"]{\n    border-right: none;\n  }\n`;\n\nconst SideMenu = styled.div`\n  background: ${th(\"colorBackgroundToolBar\")}\n  border-right: ${th(\"borderWidth\")} ${th(\"borderStyle\")} ${th(\"colorBorder\")};\n  min-width: 250px;\n  height: 100%;\n`;\n\nconst EditorArea = styled.div`\n  flex-grow: 1;\n`;\n\nconst WaxSurfaceScroll = styled.div`\n  overflow-y: auto;\n  display: flex;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  /* PM styles  for main content*/\n  ${EditorElements};\n`;\n\nconst EditorContainer = styled.div`\n  width: 65%;\n  height: 100%;\n\n  .ProseMirror {\n    box-shadow: 0 0 8px #ecedf1;\n    min-height: 90%;\n    padding: ${grid(10)};\n  }\n`;\n\nconst CommentsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 35%;\n  height: 100%;\n`;\n\nconst CommentsContainerNotes = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 35%;\n  height: 100%;\n`;\n\nconst NotesAreaContainer = styled.div`\n  background: #fff;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  position: absolute;\n  /* PM styles  for note content*/\n  ${EditorElements};\n  .ProseMirror {\n    display: inline;\n  }\n`;\n\nconst NotesContainer = styled.div`\n  box-shadow: 0 0 8px #ecedf1;\n  counter-reset: footnote-view;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ${grid(4)};\n  height: 100%;\n  width: 65%;\n`;\n\nlet surfaceHeight = 600;\nlet notesHeight = 200;\n\nconst onResizeEnd = (arr) => {\n  surfaceHeight = arr[0].size;\n  notesHeight = arr[1].size;\n};\n\nconst getNotes = (main) => {\n  const notes = DocumentHelpers.findChildrenByType(\n    main.state.doc,\n    main.state.schema.nodes.footnote,\n    true\n  );\n  return notes;\n};\n\nconst LeftSideBar = ComponentPlugin(\"leftSideBar\");\nconst MainMenuToolBar = ComponentPlugin(\"mainMenuToolBar\");\nconst NotesArea = ComponentPlugin(\"notesArea\");\nconst RightArea = ComponentPlugin(\"rightArea\");\nconst WaxOverlays = ComponentPlugin(\"waxOverlays\");\n\nconst EditoriaLayout = ({ editor }) => {\n  const {\n    view: { main },\n  } = useContext(WaxContext);\n\n  const notes = main && getNotes(main);\n  const areNotes = notes && !!notes.length && notes.length > 0;\n\n  const [hasNotes, setHasNotes] = useState(areNotes);\n\n  const showNotes = () => {\n    setHasNotes(areNotes);\n  };\n\n  const delayedShowedNotes = useCallback(\n    setTimeout(() => showNotes(), 100),\n    []\n  );\n\n  useEffect(() => {}, [delayedShowedNotes]);\n\n  return (\n    <ThemeProvider theme={cokoTheme}>\n      <Wrapper>\n        <TopMenu>\n          <MainMenuToolBar />\n        </TopMenu>\n\n        <Main>\n          <SideMenu>\n            <LeftSideBar />\n          </SideMenu>\n\n          <EditorArea>\n            <PanelGroup\n              direction=\"column\"\n              panelWidths={[\n                { size: surfaceHeight, resize: \"stretch\" },\n                { size: notesHeight, resize: \"resize\" },\n              ]}\n              onResizeEnd={onResizeEnd}\n            >\n              <WaxSurfaceScroll>\n                <EditorContainer>{editor}</EditorContainer>\n                <CommentsContainer>\n                  <RightArea area=\"main\" />\n                </CommentsContainer>\n              </WaxSurfaceScroll>\n\n              {hasNotes && (\n                <NotesAreaContainer>\n                  <NotesContainer id=\"notes-container\">\n                    <NotesArea view={main} />\n                  </NotesContainer>\n                  <CommentsContainerNotes>\n                    <RightArea area=\"notes\" />\n                  </CommentsContainerNotes>\n                </NotesAreaContainer>\n              )}\n            </PanelGroup>\n          </EditorArea>\n        </Main>\n        <WaxOverlays />\n      </Wrapper>\n    </ThemeProvider>\n  );\n};\n\nexport default EditoriaLayout;\n","import React, { useContext, useState, useCallback, useEffect } from 'react';\nimport styled, { css, ThemeProvider } from 'styled-components';\nimport PanelGroup from 'react-panelgroup';\nimport { DocumentHelpers } from 'wax-prosemirror-utilities';\nimport { WaxContext, ComponentPlugin } from 'wax-prosemirror-core';\n\nimport { grid, th } from '@pubsweet/ui-toolkit';\nimport { cokoTheme } from '../theme';\nimport EditorElements from './EditorElements';\n\n/* Katex css */\nimport '~../../katex/dist/katex.min.css';\n\nconst divider = css`\n  .panelGroup {\n    background: #fff;\n  }\n  .divider {\n    > div {\n      background: ${th('colorBorder')};\n      height: ${grid(1)};\n      max-height: ${grid(1)};\n\n      &:hover {\n        height: ${grid(2)};\n        max-height: ${grid(2)};\n      }\n    }\n  }\n`;\n\nconst Wrapper = styled.div`\n  background: ${th('colorBackground')};\n  font-family: ${th('fontInterface')};\n  font-size: ${th('fontSizeBase')};\n\n  display: flex;\n  flex-direction: column;\n\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n\n  ${divider}\n`;\n\nconst Main = styled.div`\n  display: flex;\n  flex-grow: 1;\n`;\n\nconst TopMenu = styled.div`\n  display: flex;\n  height: 70px;\n  padding-top: 10px;\n  flex-wrap: wrap;\n  font-size:8px;\n  position:absolute;\n  z-index: 999;\n  top: 0;\n  bottom:0;\n  user-select: none;\n  background: ${th('colorBackgroundToolBar')}\n  border-bottom: ${th('borderWidth')} ${th('borderStyle')} ${th('colorBorder')};\n  > div {\n    height: 20px;\n  }\n  > div:not(:last-child) {\n    border-right: ${th('borderWidth')} ${th('borderStyle')}\n      ${th('colorBorder')};\n  }\n  button: {\n    height: 20px;\n  }\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n  div:last-child{\n      button span {\n        font-size: 10px;\n        margin: 0;\n      }\n  }\n`;\n\nconst EditorArea = styled.div`\n  flex-grow: 1;\n`;\n\nconst WaxSurfaceScroll = styled.div`\n  overflow-y: auto;\n  overflow-x: scroll;\n  display: flex;\n  box-sizing: border-box;\n  height: 100%;\n  width: 96%;\n  position: absolute;\n  /* PM styles  for main content*/\n  ${EditorElements};\n`;\n\nconst EditorContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  .ProseMirror {\n    box-shadow: 0 0 8px #ecedf1;\n    min-height: 90%;\n    padding: ${grid(25)} ${grid(2)} ${grid(40)} ${grid(2)};\n  }\n`;\n\nconst CommentsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst CommentsContainerNotes = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst NotesAreaContainer = styled.div`\n  box-shadow: 0 0 8px #ecedf1;\n  background: #fff;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  position: absolute;\n  /* PM styles  for note content*/\n  ${EditorElements};\n`;\n\nconst NotesContainer = styled.div`\n  counter-reset: footnote-view;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ${grid(4)};\n  height: 100%;\n  width: 96%;\n  > div {\n    padding-left: ${grid(1)};\n    padding-right: ${grid(1)};\n  }\n`;\n\nlet surfaceHeight = 500;\nlet notesHeight = 150;\n\nconst onResizeEnd = arr => {\n  surfaceHeight = arr[0].size;\n  notesHeight = arr[1].size;\n};\n\nconst getNotes = main => {\n  const notes = DocumentHelpers.findChildrenByType(\n    main.state.doc,\n    main.state.schema.nodes.footnote,\n    true,\n  );\n  return notes;\n};\n\nconst TopBar = ComponentPlugin('topBar');\nconst NotesArea = ComponentPlugin('notesArea');\nconst RightArea = ComponentPlugin('rightArea');\nconst WaxOverlays = ComponentPlugin('waxOverlays');\n\nconst EditoriaLayout = ({ editor }) => {\n  const {\n    view: { main },\n  } = useContext(WaxContext);\n\n  const notes = main && getNotes(main);\n  const areNotes = notes && !!notes.length && notes.length > 0;\n\n  const [hasNotes, setHasNotes] = useState(areNotes);\n\n  const showNotes = () => {\n    setHasNotes(areNotes);\n  };\n\n  const delayedShowedNotes = useCallback(\n    setTimeout(() => showNotes(), 100),\n    [],\n  );\n\n  useEffect(() => {}, [delayedShowedNotes]);\n\n  return (\n    <ThemeProvider theme={cokoTheme}>\n      <Wrapper>\n        <TopMenu>\n          <TopBar />\n        </TopMenu>\n\n        <Main>\n          <EditorArea>\n            <PanelGroup\n              direction=\"column\"\n              panelWidths={[\n                { size: surfaceHeight, resize: 'stretch' },\n                { size: notesHeight, resize: 'resize' },\n              ]}\n              onResizeEnd={onResizeEnd}\n            >\n              <WaxSurfaceScroll>\n                <EditorContainer>{editor}</EditorContainer>\n                <CommentsContainer>\n                  <RightArea area=\"main\" />\n                </CommentsContainer>\n              </WaxSurfaceScroll>\n\n              {hasNotes && (\n                <NotesAreaContainer>\n                  <NotesContainer id=\"notes-container\">\n                    <NotesArea view={main} />\n                  </NotesContainer>\n                  <CommentsContainerNotes>\n                    <RightArea area=\"notes\" />\n                  </CommentsContainerNotes>\n                </NotesAreaContainer>\n              )}\n            </PanelGroup>\n          </EditorArea>\n        </Main>\n\n        <WaxOverlays />\n      </Wrapper>\n    </ThemeProvider>\n  );\n};\n\nexport default EditoriaLayout;\n","import { emDash, ellipsis } from \"prosemirror-inputrules\";\nimport { columnResizing, tableEditing } from \"prosemirror-tables\";\nimport {\n  AnnotationToolGroupService,\n  ImageService,\n  PlaceholderService,\n  InlineAnnotationsService,\n  LinkService,\n  ListsService,\n  ListToolGroupService,\n  TablesService,\n  TableToolGroupService,\n  BaseService,\n  BaseToolGroupService,\n  DisplayBlockLevelService,\n  DisplayToolGroupService,\n  ImageToolGroupService,\n  TextBlockLevelService,\n  TextToolGroupService,\n  NoteService,\n  NoteToolGroupService,\n  TrackChangeService,\n  CommentsService,\n  CodeBlockService,\n  CodeBlockToolGroupService,\n  TrackChangeToolGroupService,\n  DisplayTextToolGroupService,\n  MathService,\n  FindAndReplaceService,\n  TrackingAndEditingToolGroupService,\n  FullScreenService,\n  FullScreenToolGroupService,\n  SpecialCharactersService,\n  SpecialCharactersToolGroupService,\n  HighlightService,\n  TextHighlightToolGroupServices,\n} from \"wax-prosemirror-services\";\n\nimport { DefaultSchema } from \"wax-prosemirror-utilities\";\n\nimport { WaxSelectionPlugin } from \"wax-prosemirror-plugins\";\n\nimport invisibles, {\n  space,\n  hardBreak,\n  paragraph,\n} from \"@guardian/prosemirror-invisibles\";\n\nexport default {\n  MenuService: [\n    {\n      templateArea: \"mainMenuToolBar\",\n      toolGroups: [\n        \"Base\",\n        {\n          name: \"Annotations\",\n          more: [\"Superscript\", \"Subscript\", \"SmallCaps\"],\n        },\n        \"HighlightToolGroup\",\n        \"Notes\",\n        \"Lists\",\n        \"Images\",\n        \"SpecialCharacters\",\n        \"CodeBlock\",\n        \"Tables\",\n        \"TrackingAndEditing\",\n        \"FullScreen\",\n      ],\n    },\n    {\n      templateArea: \"leftSideBar\",\n      toolGroups: [\"DisplayText\"],\n    },\n  ],\n\n  SchemaService: DefaultSchema,\n\n  RulesService: [emDash, ellipsis],\n  ShortCutsService: {},\n  EnableTrackChangeService: { enabled: false },\n\n  PmPlugins: [\n    columnResizing(),\n    tableEditing(),\n    invisibles([hardBreak()]),\n    WaxSelectionPlugin,\n  ],\n\n  // Always load first CommentsService and LinkService,\n  //as it matters on how PM treats nodes and marks\n  services: [\n    new DisplayBlockLevelService(),\n    new DisplayToolGroupService(),\n    new TextBlockLevelService(),\n    new TextToolGroupService(),\n    new ListsService(),\n    new LinkService(),\n    new InlineAnnotationsService(),\n    new TrackChangeService(),\n    new CommentsService(),\n    new PlaceholderService(),\n    new ImageService(),\n    new TablesService(),\n    new BaseService(),\n    new BaseToolGroupService(),\n    new NoteService(),\n    new TableToolGroupService(),\n    new ImageToolGroupService(),\n    new AnnotationToolGroupService(),\n    new NoteToolGroupService(),\n    new ListToolGroupService(),\n    new CodeBlockService(),\n    new CodeBlockToolGroupService(),\n    new TrackChangeToolGroupService(),\n    new DisplayTextToolGroupService(),\n    new MathService(),\n    new FindAndReplaceService(),\n    new TrackingAndEditingToolGroupService(),\n    new FullScreenService(),\n    new FullScreenToolGroupService(),\n    new SpecialCharactersService(),\n    new SpecialCharactersToolGroupService(),\n    new HighlightService(),\n    new TextHighlightToolGroupServices(),\n  ],\n};\n","import { emDash, ellipsis } from \"prosemirror-inputrules\";\nimport { columnResizing, tableEditing } from \"prosemirror-tables\";\nimport {\n  AnnotationToolGroupService,\n  ImageService,\n  PlaceholderService,\n  InlineAnnotationsService,\n  LinkService,\n  ListsService,\n  ListToolGroupService,\n  TablesService,\n  TableToolGroupService,\n  BaseService,\n  BaseToolGroupService,\n  DisplayBlockLevelService,\n  DisplayToolGroupService,\n  ImageToolGroupService,\n  TextBlockLevelService,\n  TextToolGroupService,\n  NoteService,\n  NoteToolGroupService,\n  TrackChangeService,\n  CommentsService,\n  CodeBlockService,\n  CodeBlockToolGroupService,\n  TrackChangeToolGroupService,\n  DisplayTextToolGroupService,\n  BlockDropDownToolGroupService,\n  HighlightService,\n  TextHighlightToolGroupServices,\n} from \"wax-prosemirror-services\";\nimport { DefaultSchema } from \"wax-prosemirror-utilities\";\n\nimport { WaxSelectionPlugin } from \"wax-prosemirror-plugins\";\n\nimport invisibles, {\n  space,\n  hardBreak,\n  paragraph,\n} from \"@guardian/prosemirror-invisibles\";\n\nexport default {\n  MenuService: [\n    {\n      templateArea: \"topBar\",\n      toolGroups: [\n        \"Base\",\n        {\n          name: \"Annotations\",\n          more: [\"Superscript\", \"Subscript\", \"SmallCaps\"],\n        },\n        \"HighlightToolGroup\",\n        \"BlockDropDown\",\n        \"Notes\",\n        \"Lists\",\n        \"Images\",\n        \"CodeBlock\",\n        \"Tables\",\n        \"TrackChange\",\n      ],\n    },\n  ],\n\n  SchemaService: DefaultSchema,\n  RulesService: [emDash, ellipsis],\n  ShortCutsService: {},\n  EnableTrackChangeService: { enabled: false },\n\n  PmPlugins: [\n    columnResizing(),\n    tableEditing(),\n    invisibles([hardBreak()]),\n    WaxSelectionPlugin,\n  ],\n\n  // Always load first CommentsService and LinkService,\n  //as it matters on how PM treats nodes and marks\n  services: [\n    new DisplayBlockLevelService(),\n    new DisplayToolGroupService(),\n    new TextBlockLevelService(),\n    new TextToolGroupService(),\n    new ListsService(),\n    new LinkService(),\n    new InlineAnnotationsService(),\n    new TrackChangeService(),\n    new CommentsService(),\n    new PlaceholderService(),\n    new ImageService(),\n    new TablesService(),\n    new BaseService(),\n    new BaseToolGroupService(),\n    new NoteService(),\n    new TableToolGroupService(),\n    new ImageToolGroupService(),\n    new AnnotationToolGroupService(),\n    new NoteToolGroupService(),\n    new ListToolGroupService(),\n    new CodeBlockService(),\n    new CodeBlockToolGroupService(),\n    new TrackChangeToolGroupService(),\n    new DisplayTextToolGroupService(),\n    new BlockDropDownToolGroupService(),\n    new HighlightService(),\n    new TextHighlightToolGroupServices(),\n  ],\n};\n","import React, { useLayoutEffect, useState, useMemo } from \"react\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Wax } from \"wax-prosemirror-core\";\n\nimport { EditoriaLayout, EditoriaMobileLayout } from \"./layout\";\nimport { config, configMobile } from \"./config\";\nimport text from \"./text\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    margin: 0;\n    padding: 0;\n    overflow-y: hidden;\n  }\n\n  #root {\n    height:100vh;\n    width:100vw;\n  }\n`;\n\nconst renderImage = (file) => {\n  const reader = new FileReader();\n  return new Promise((accept, fail) => {\n    reader.onload = () => accept(reader.result);\n    reader.onerror = () => fail(reader.error);\n    // Some extra delay to make the asynchronicity visible\n    setTimeout(() => reader.readAsDataURL(file), 150);\n  });\n};\n\nconst user = {\n  userId: \"1234\",\n  username: \"demo\",\n};\n\nconst App = () => {\n  const [width] = useWindowSize();\n\n  let layout = EditoriaLayout;\n  let finalConfig = config;\n  let key = \"editoria\";\n\n  if (width < 600) {\n    layout = EditoriaMobileLayout;\n    finalConfig = configMobile;\n    key = \"editoriaMobile\";\n  }\n\n  const EditoriaComponent = useMemo(\n    () => (\n      <>\n        <GlobalStyle />\n        <Wax\n          key={key}\n          config={finalConfig}\n          autoFocus\n          placeholder=\"Type Something...\"\n          fileUpload={(file) => renderImage(file)}\n          value={text}\n          layout={layout}\n          user={user}\n        />\n      </>\n    ),\n    [layout, finalConfig]\n  );\n  return <>{EditoriaComponent}</>;\n};\n\nfunction useWindowSize() {\n  const [size, setSize] = useState([window.innerWidth, window.innerHeight]);\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize([window.innerWidth, window.innerHeight]);\n    }\n    window.addEventListener(\"resize\", updateSize);\n    updateSize();\n\n    return () => window.removeEventListener(\"resize\", updateSize);\n  }, []);\n  return size;\n}\n\nexport default App;\n","const content = `<p class=\"paragraph\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque in commodo lorem, ac fringilla nibh. Fusce placerat nulla rutrum dui pharetra, in ullamcorper mauris malesuada. Aenean non purus at est egestas aliquam. Nam laoreet tempus erat, ut molestie tellus sodales eu. Maecenas a commodo libero. Aliquam ac odio sit amet quam scelerisque fermentum. Vivamus feugiat dignissim sapien, ac rutrum augue vestibulum sit amet. Morbi et malesuada tellus.  Praesent vestibulum, <footnote id=\"89cc963b-8629-45a6-9394-fa229e19f18b\">first note content  </footnote>lorem eu blandit molestie, ligula augue posuere augue, ac fringilla metus ex a elit. Nunc ac ex lacinia ligula dapibus ullamcorper vel sit aet mi.</p><p class=\"paragraph\">Ut mollis velit sed erat pretium, et mollis libero lobortis. Proin est ipsum, fermentum sagittis dictum sit amet, porta quis libero. Nam vehicula scelerisque purus sit amet condimentum. Nulla eu dui ut velit aliquam ultricies sed vitae tortor. Phasellus rhoncus nunc vitae dui tristique venenatis. Maecenas dignissim justo sit amet dapibus molestie. Aenean tristique tortor odio, vel vestibulum tortor fermentum condimentum. Maecenas rutrum, est vitae pellentesque vehicula, enim lacus vehicula erat, vel malesuada purus elit id enim. Nullam laoreet eu neque ut dictum.</p><p class=\"paragraph\">Integer consequat ipsum ipsum, ut tristique ligula egestas et. Etiam dolor mi, dictum eu nunc in, vestibulum ultricies lorem. Fusce tempus risus vitae sodales feugiat. Maecenas et turpis elementum, bibendum ante in, convallis eros. Nullam sit amet efficitur elit. Duis cursus, tortor et egestas tempor, enim dui efficitur sapien, a <span class=\"comment\" data-id=\"23535152-ef95-44c0-a076-6fdf7168573f\" data-conversation=\"[{&quot;content&quot;:&quot;comment&quot;,&quot;displayName&quot;:&quot;demo&quot;,&quot;timestamp&quot;:1601559766164}]\" data-viewid=\"main\" data-group=\"main\">pellentesque odio ex ac urna. Nam vitae ligula rutrum </span>eros lacinia euismod. Proin vel dignissim nisl. Pellentesque vitae lectus ligula. Ut eget diam ut urna elementum imperdiet eleifend eget neque. Vivamus ac metus facilisis, dictum dui eu, porttitor orci. Aliquam ac ultrices turpis. Donec id velit eu mauris molestie eleifend eu ac justo. Sed blandit erat vel lorem consequat fringilla.</p><p class=\"paragraph\">Aenean ut ante nisi. Donec pellentesque, ex nec imperdiet lobortis, erat ligula ornare sapien, ut pulvinar turpis est in ante. Etiam consectetur risus cursus mauris interdum placerat. Mauris velit erat, finibus ac blandit ac, aliquam eu leo. Vivamus vehicula massa quam, laoreet ultricies turpis faucibus a. Donec luctus ex nibh, in sagittis orci cursus at.<footnote id=\"a9b193fc-9410-48bb-a535-e76ca512e55c\">second note content</footnote> Nullam dictum bibendum mauris, ut condimentum mauris porttitor non. Donec ligula dui, consequat et neque sed, imperdiet convallis sem. Vivamus fringilla vestibulum tellus, in gravida nulla aliquet vel. Pellentesque eu suscipit libero. Aenean tincidunt accumsan consequat. Proin consectetur risus pharetra, laoreet eros at, rhoncus eros. Nam finibus feugiat arcu quis sodales. Fusce ac tincidunt purus.</p><p class=\"paragraph\">Praesent id imperdiet diam, eu facilisis nisl. Vestibulum in lorem pellentesque, elementum orci facilisis, maximus magna. Fusce faucibus ut nibh id viverra. Etiam dapibus ligula sed nibh convallis lacinia. Nunc in finibus purus. Morbi tellus orci, molestie vestibulum purus at, viverra ullamcorper est. Nulla egestas sem nec viverra euismod. Sed ut venenatis nulla, eu rhoncus metus. In maximus et felis at condimentum. Ut sollicitudin eu nisi eu efficitur.</p>`;\nexport default content;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}